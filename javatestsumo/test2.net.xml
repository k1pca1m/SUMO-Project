<?xml version="1.0" encoding="UTF-8"?>

<net version="1.20" junctionCornerDetail="5" limitTurnSpeed="5.50"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:noNamespaceSchemaLocation="http://sumo.dlr.de/xsd/net_file.xsd">

    <!-- Coordinate system / bounds -->
    <location netOffset="0.00,0.00"
              convBoundary="-60.98,-9.38,32.32,17.80"
              origBoundary="10000000000.00,10000000000.00,-10000000000.00,-10000000000.00"
              projParameter="!"/>

    <!-- Internal edges at junction XY -->
    <edge id=":XY_0" function="internal">
        <lane id=":XY_0_0" index="0" speed="13.89" length="11.69"
              shape="-8.03,19.20 -19.72,19.25"/>
    </edge>
    <edge id=":XY_1" function="internal">
        <lane id=":XY_1_0" index="0" speed="6.62" length="9.42"
              shape="-14.14,10.43 -13.76,12.88 -12.62,14.62 -10.71,15.66 -8.05,16.00"/>
    </edge>
    <edge id=":XY_2" function="internal">
        <lane id=":XY_2_0" index="0" speed="13.89" length="11.69"
              shape="-19.74,16.05 -8.05,16.00"/>
    </edge>

    <!-- Main horizontal road J1 <-> J0 -->
    <edge id="-E0" from="J1" to="XY" priority="-1" shape="32.32,17.44 -8.04,17.60">
        <lane id="-E0_0" index="0" speed="13.89" length="40.36"
              shape="32.32,19.04 -8.03,19.20"/>
    </edge>
    <edge id="-E0.40" from="XY" to="J0" priority="-1" shape="-8.04,17.60 -60.98,17.80">
        <lane id="-E0.40_0" index="0" speed="13.89" length="41.25"
              shape="-19.72,19.25 -60.97,19.40"/>
    </edge>
    <edge id="E0" from="J0" to="XY" priority="-1" shape="-60.98,17.80 -15.27,17.63">
        <lane id="E0_0" index="0" speed="13.89" length="41.25"
              shape="-60.98,16.20 -19.74,16.05"/>
    </edge>
    <edge id="E0.45" from="XY" to="J1" priority="-1" shape="-15.27,17.63 32.32,17.44">
        <lane id="E0.45_0" index="0" speed="13.89" length="40.36"
              shape="-8.05,16.00 32.31,15.84"/>
    </edge>

    <!-- Side road from J5 up to XY -->
    <edge id="E1" from="J5" to="XY" priority="-1" shape="-15.73,-9.38 -15.74,10.75">
        <lane id="E1_0" index="0" speed="13.89" length="19.82"
              shape="-14.13,-9.38 -14.14,10.43"/>
    </edge>

    <!-- Traffic light at XY, same id used by TraCI (for GUI control later) -->
    <tlLogic id="XY" type="static" programID="0" offset="0">
        <phase duration="42" state="GrG"/>
        <phase duration="3"  state="Gry"/>
        <phase duration="42" state="GGr"/>
        <phase duration="3"  state="Gyr"/>
    </tlLogic>

    <!-- Junction geometry -->
    <junction id="J0" type="dead_end" x="-60.98" y="17.80"
              incLanes="-E0.40_0" intLanes=""
              shape="-60.98,17.80 -60.96,21.00 -60.98,17.80"/>
    <junction id="J1" type="dead_end" x="32.32" y="17.44"
              incLanes="E0.45_0" intLanes=""
              shape="32.32,17.44 32.30,14.24 32.32,17.44"/>
    <junction id="J5" type="dead_end" x="-15.73" y="-9.38"
              incLanes="" intLanes=""
              shape="-15.73,-9.38 -12.53,-9.38"/>
    <junction id="XY" type="traffic_light" x="-13.02" y="15.33"
              incLanes="-E0_0 E1_0 E0_0"
              intLanes=":XY_0_0 :XY_1_0 :XY_2_0"
              shape="-8.03,20.80 -8.05,14.40 -10.55,13.97 -11.42,13.41 -12.04,12.64 -12.42,11.64 -12.54,10.42 -15.74,10.42 -16.19,12.65 -16.74,13.43 -17.52,13.99 -18.52,14.33 -19.74,14.45 -19.72,20.85">
        <request index="0" response="000" foes="000" cont="0"/>
        <request index="1" response="100" foes="100" cont="0"/>
        <request index="2" response="000" foes="010" cont="0"/>
    </junction>

    <!-- Connections through XY (matching routes) -->
    <connection from="-E0" to="-E0.40" fromLane="0" toLane="0"
                via=":XY_0_0" tl="XY" linkIndex="0" dir="s" state="O"/>
    <connection from="E0"  to="E0.45"  fromLane="0" toLane="0"
                via=":XY_2_0" tl="XY" linkIndex="2" dir="s" state="O"/>
    <connection from="E1"  to="E0.45"  fromLane="0" toLane="0"
                via=":XY_1_0" tl="XY" linkIndex="1" dir="r" state="o"/>

    <connection from=":XY_0" to="-E0.40" fromLane="0" toLane="0"
                dir="s" state="M"/>
    <connection from=":XY_1" to="E0.45"  fromLane="0" toLane="0"
                dir="r" state="M"/>
    <connection from=":XY_2" to="E0.45"  fromLane="0" toLane="0"
                dir="s" state="M"/>

</net>
